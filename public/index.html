function login() {
  const user = document.getElementById('username').value;
  const pass = document.getElementById('password').value;
  fetch('/api/login', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ username: user, password: pass })
  })
  .then(res => res.json())
  .then(data => {
    if(data.success){
      alert('Login success');
      // Show dashboard, hide login UI
      currentUser = data.user;
      document.getElementById('loginForm').style.display='none';
      document.getElementById('dashboard').style.display='block';
      document.getElementById('welcomeText').innerText = `Welcome ${currentUser.username}`;
      if(currentUser.role==='admin'){ document.getElementById('adminTabBtn').style.display='block'; }
      renderWalletTable(); 
      renderCombatTable(); 
      showTab('walletTab');
    } else {
      alert('Invalid credentials');
    }
  });
}
